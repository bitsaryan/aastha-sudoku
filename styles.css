
:root{
  --bg:#0f0f10; --fg:#fff; --muted:#a4a4a8;
  --card:#17171a; --accent:#7dd3fc; --accent2:#60a5fa;
  --cell:#111113; --cell-alt:#131316; --sel:#2a2a33; --error:#ef4444; --given:#ddd;
  --radius:16px;
}
*{box-sizing:border-box}
html,body{height:100%; margin:0; padding:0}
body{
  background:var(--bg); color:var(--fg); font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overscroll-behavior:none;
}
#app{position:fixed; inset: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  display:flex; flex-direction:column; gap:10px;}

.topbar{display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:linear-gradient(180deg,#121215,#0f0f10);
  border-bottom:1px solid #1e1e22;}
.brand{font-weight:700; letter-spacing:.3px}
.controls{display:flex; gap:8px}
.controls button{background:var(--card); color:var(--fg); border:0; padding:10px 12px; border-radius:12px; font-size:16px}
.controls .toggle.active{outline:2px solid var(--accent)}

.content{display:grid; grid-template-columns: 1fr 220px; gap:14px; padding:0 14px; height:100%}
@media (max-width: 820px){ .content{ grid-template-columns: 1fr; } .side{ order: -1; display:flex; gap:12px; align-items:center; justify-content:space-between; } }

.board-wrap{ display:grid; place-items:center; }
.board{
  width:min(92vw, 560px);
  aspect-ratio:1/1;
  background:#222;
  padding:6px; border-radius:var(--radius); display:grid; grid-template-columns: repeat(9, 1fr); gap:2px;
}
.cell{
  background:var(--cell); border-radius:10px; display:grid; place-items:center;
  font-weight:700; user-select:none; -webkit-user-select:none;
  position:relative; min-width:0;
}
.cell.given{ color:var(--given) }
.cell.selected{ outline:2px solid var(--accent2); outline-offset:-2px; background:var(--sel) }
.cell.peer{ background: #19191d; }
.cell.same{ background: #1c2130; }
.cell.error{ background:#3a1214; color:#fca5a5; }
.cell .notes{ position:absolute; inset:3px; display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); gap:2px; font-size: clamp(10px, 1.9vw, 14px); opacity:.9}
.cell .notes span{ display:grid; place-items:center; color:#9aa0aa }
.cell .val{ font-size: clamp(18px, 3.2vw, 24px); }

.side{ background:var(--card); border-radius:var(--radius); padding:12px; }
.timer{ font-size:22px; font-weight:800 }
.level{ margin:8px 0 6px 0 }
.level select{ width:100%; background:var(--cell); color:var(--fg); border:0; padding:10px; border-radius:12px; }
.status{ color:var(--muted); min-height:1.2em }
.made{ color:#9aa0aa; font-size:13px; margin-top:8px }

.numpad{ display:grid; grid-template-columns: repeat(9,1fr); gap:8px; padding:12px 14px; background:#101114; border-top:1px solid #1d1e22; }
.numpad button{ background:var(--card); border:0; color:var(--fg); padding:14px 0; border-radius:12px; font-weight:800; font-size:18px }
.numpad button:active{ transform: scale(0.98) }
